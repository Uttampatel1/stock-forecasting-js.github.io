<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Analysis Dashboard</title>
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- Materialize CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    
    <style>
        .close-first {
            display: none;
        }
        .chart-container {
            height: 500px;
            margin: 20px 0;
        }
        .analysis-container {
            height: 450px;
            margin: 20px 0;
        }
        .log-container {
            height: 150px;
            overflow: auto;
            margin: 20px 0;
        }
        .settings-icon {
            font-size: 3rem !important;
        }
        .btn-container {
            margin-top: 5px;
            width: 160px;
        }
        .ticker-container {
            margin-top: 5px;
            width: 240px;
        }
    </style>
</head>
<body>

<!-- Settings Panel -->
<div class="row" style="padding-left:10px;padding-right:10px">
    <ul class="collapsible" data-collapsible="accordion">
        <li>
            <div class="collapsible-header">
                <i class="material-icons settings-icon">settings</i>
                <div class="row" style="margin-bottom:10px;margin-top:10px">
                    <div class="col s3 m1">
                        Settings
                    </div>
                    <div class="input-field col s12 m1 right btn-container">
                        <button id="trainbutton" class="waves-effect waves-light btn red lighten-2">Train</button>
                    </div>
                    <div class="input-field col s12 m1 right btn-container">
                        <button id="suggestbutton" class="waves-effect waves-light btn blue lighten-2">Suggest</button>
                    </div>
                    <div class="input-field col s12 m2 right ticker-container">
                        <input id="ticker" type="text" class="validate" placeholder="Enter ticker (e.g. AAPL)">
                        <label for="ticker" class="active">Stock Ticker</label>
                    </div>
                    <div class="input-field col s12 m1 right btn-container">
                        <button id="fetchData" class="waves-effect waves-light btn blue lighten-2">Fetch Data</button>
                    </div>
                </div>
            </div>
            <div class="collapsible-body">
                <div class="row center">
                    <div class="input-field col m2 offset-m1" style="margin-left:5.33%">
                        Neural Network settings
                    </div>
                    <div class="input-field col s12 m1">
                        <input id="learningrate" type="number" placeholder="Eg: 0.001" class="validate tooltipped" 
                               data-position="bottom" data-delay="50" data-tooltip="learning rate during training">
                        <label class="active">Learning rate</label>
                    </div>
                    <div class="input-field col s12 m1">
                        <input id="inputdropoutrate" type="number" placeholder="Eg: 0.9" class="validate tooltipped"
                               data-position="bottom" data-delay="50" data-tooltip="dropout rate for LSTM input">
                        <label class="active">Input dropout rate</label>
                    </div>
                    <div class="input-field col s12 m1">
                        <input id="outputdropoutrate" type="number" placeholder="Eg: 0.9" class="validate tooltipped"
                               data-position="bottom" data-delay="50" data-tooltip="dropout rate for LSTM output">
                        <label class="active">Output dropout rate</label>
                    </div>
                    <div class="input-field col s12 m1">
                        <input id="timestamp" type="number" placeholder="Eg: 5" class="validate tooltipped"
                               data-position="bottom" data-delay="50" data-tooltip="Trends for every minibatch">
                        <label class="active">Timestamp per training</label>
                    </div>
                    <div class="input-field col s12 m1">
                        <input id="sizelayer" type="number" placeholder="Eg: 64" class="validate tooltipped"
                               data-position="bottom" data-delay="50" data-tooltip="LSTM size">
                        <label class="active">Size layer</label>
                    </div>
                    <div class="input-field col s12 m1">
                        <input id="epoch" type="number" placeholder="Eg: 10" class="validate tooltipped"
                               data-position="bottom" data-delay="50" data-tooltip="Total epoch">
                        <label class="active">Training Iteration</label>
                    </div>
                    <div class="input-field col s12 m1">
                        <input id="future" type="number" placeholder="Eg: 10" class="validate tooltipped"
                               data-position="bottom" data-delay="50" data-tooltip="number of days forecast">
                        <label class="active">Future days to forecast</label>
                    </div>
                    <div class="input-field col s12 m1">
                        <input id="smooth" type="number" placeholder="Eg: 10" class="validate tooltipped"
                               data-position="bottom" data-delay="50" data-tooltip="Rate anchor smoothing for trends">
                        <label class="active">Smoothing weights</label>
                    </div>
                </div>
                <div class="row center">
                    <div class="input-field col m2 offset-m1" style="margin-left:5.33%">
                        Buying & Selling simulation
                    </div>
                    <div class="input-field col s12 m2">
                        <input id="initialmoney" type="number" placeholder="Eg: 10000" class="validate tooltipped"
                               data-position="bottom" data-delay="50" data-tooltip="Money in for simulation">
                        <label class="active">Initial money(usd)</label>
                    </div>
                    <div class="input-field col s12 m2">
                        <input id="maxbuy" type="number" placeholder="Eg: 5" class="validate tooltipped"
                               data-position="bottom" data-delay="50" data-tooltip="Max unit to buy">
                        <label class="active">Max buy(unit)</label>
                    </div>
                    <div class="input-field col s12 m2">
                        <input id="maxsell" type="number" placeholder="Eg: 10" class="validate tooltipped"
                               data-position="bottom" data-delay="50" data-tooltip="Max unit to sell">
                        <label class="active">Max sell(unit)</label>
                    </div>
                    <div class="input-field col s12 m2">
                        <input id="history" type="number" placeholder="Eg: 5" class="validate tooltipped"
                               data-position="bottom" data-delay="50" data-tooltip="MA to compare of">
                        <label class="active">Historical rolling</label>
                    </div>
                </div>
            </div>
        </li>
    </ul>
</div>

<!-- Warning Message -->
<h6 class='header center light'>
    WARNING, This website may hang during training, and do not use this website to buy real stock!<br><br>
    Enter a stock ticker (e.g., AAPL, GOOGL) and click Fetch Data to begin.
</h6>

<!-- Main Chart -->
<div class="row" style="padding-left:10px;padding-right:10px">
    <div class="col s12 m12">
        <div id="div_output" class="chart-container"></div>
    </div>
</div>

<!-- Analysis Charts -->
<div class="row close-first" style="padding-left:10px;padding-right:10px">
    <div class="col s12 m8">
        <div id="div_dist" class="analysis-container"></div>
    </div>
    <div class="col s12 m4">
        <div class="row">
            <div id="div_loss" style="height: 250px;"></div>
        </div>
        <div class="row" id="log" class="log-container"></div>
    </div>
</div>

<!-- Simulation Log -->
<div class="row" style="padding-left:10px;padding-right:10px">
    <ul class="collapsible" data-collapsible="accordion">
        <li>
            <div class="collapsible-header">
                <i class="material-icons">archive</i>Simulation log
            </div>
            <div class="collapsible-body">
                <table class="bordered highlight">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Action</th>
                            <th>Price</th>
                            <th>Investment</th>
                            <th>Balance</th>
                        </tr>
                    </thead>
                    <tbody id='table-body'></tbody>
                </table>
                <br>
                <span id="log-invest"></span>
            </div>
        </li>
    </ul>
</div>

<!-- Investment Summary -->
<div class="row center" id="color-investment"></div>

<!-- Dependencies -->
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tensorflow/4.10.0/tf.min.js"></script> -->


<script src="js/tf.js"></script>
<script src="js/jquery-3.3.1.min.js"></script>
<script src="js/materialize.min.js"></script>
<script src="js/d3.v3.min.js"></script>
<script src="js/numeric-1.2.6.min.js"></script>
<script src="js/numjs.min.js"></script>
<script src="js/utils.js"></script>
<script src="js/echarts.min.js"></script>
<script src="js/echarts-gl.min.js"></script>
<script src="js/papaparse.min.js"></script>
<script src="data/google.js"> </script>
<script src="init.js"> </script>


<script>
    // Initialize tooltips and collapsible elements
    document.addEventListener('DOMContentLoaded', function() {
        var elems = document.querySelectorAll('.tooltipped');
        var instances = M.Tooltip.init(elems);
        
        var elems = document.querySelectorAll('.collapsible');
        var instances = M.Collapsible.init(elems);
    });
</script>